(self.webpackChunkarco_lesscode=self.webpackChunkarco_lesscode||[]).push([[465],{"./src/components/FormRender/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,b:()=>FormRender});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),_arco_design_web_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/es/Button/index.js"),_arco_design_web_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/es/Form/index.js"),_arco_design_web_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/es/Space/index.js"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),_libs_index__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/libs/index.ts");const{useForm}=_arco_design_web_react__WEBPACK_IMPORTED_MODULE_2__.A;function FormRender(props){const[form]=props.form?[props.form]:useForm(),[properties,setProperties]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)({}),{maxWidth,submitText,labelCol,wrapperCol,hiddenReset,...otherProps}=props,onValuesChange=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((changedValues,allValues)=>{const nextProperties=Object.entries(props.schemas.properties).reduce((acc,[key,field])=>({...acc,[key]:{...field,..."function"==typeof field.reload?field.reload(changedValues,allValues,field,form):{}}}),{});setProperties(nextProperties)},[props.schemas.properties,form]);return(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{setProperties(props.schemas.properties)},[props.schemas.properties]),(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{form.setFieldsValue(props.initialValues)},[props.initialValues,form]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{style:{maxWidth:maxWidth||"100%",width:"100%"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_libs_index__WEBPACK_IMPORTED_MODULE_5__.o,{form,...otherProps,schemas:{...props.schemas,properties},onValuesChange:(value,values)=>{onValuesChange(value,values),props?.onValuesChange?.(value,values)},comments:props.comments}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex justify-start",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_2__.A.Item,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_3__.A,{className:"flex justify-start",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_1__.A,{type:"primary",loading:props.submitting,onClick:()=>form.submit(),children:submitText||"提交"}),!hiddenReset&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_1__.A,{onClick:()=>{props?.onReset?.(),form.resetFields()},children:"重置"})]})})})]})}const __WEBPACK_DEFAULT_EXPORT__=FormRender;FormRender.__docgenInfo={description:"",methods:[],displayName:"FormRender",props:{form:{required:!1,tsType:{name:"FormInstance"},description:""},maxWidth:{required:!1,tsType:{name:"string"},description:""},submitting:{required:!1,tsType:{name:"boolean"},description:""},hiddenReset:{required:!1,tsType:{name:"boolean"},description:""},submitText:{required:!1,tsType:{name:"string"},description:""},schemas:{required:!0,tsType:{name:"FormSchemas"},description:""},comments:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},initialValues:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},onValuesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: unknown, values: unknown) => void",signature:{arguments:[{type:{name:"unknown"},name:"value"},{type:{name:"unknown"},name:"values"}],return:{name:"void"}}},description:""},onReset:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(values: Record<string, unknown>) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"unknown"}],raw:"Record<string, unknown>"},name:"values"}],return:{name:"void"}}},description:""}},composes:["Partial"]}},"./stories/RequestProvider.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,FormValuesInject:()=>FormValuesInject,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),qs__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/dist/css/arco.css"),__webpack_require__("./node_modules/.pnpm/qs@6.14.0/node_modules/qs/lib/index.js")),qs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),_src_components_RequestProvider__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/RequestProvider/index.tsx"),_src_components_FormRender__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/FormRender/index.tsx"),_arco_design_web_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/es/Alert/index.js"),_arco_design_web_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/es/Button/index.js"),_arco_design_web_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/es/Input/index.js"),_arco_design_web_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/es/Space/index.js"),_arco_design_web_react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/es/Table/index.js"),_arco_design_web_react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/.pnpm/@arco-design+web-react@2.66.4_@types+react@19.1.10_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@arco-design/web-react/es/Typography/index.js");const __WEBPACK_DEFAULT_EXPORT__={title:"RequestProvider",component:_src_components_RequestProvider__WEBPACK_IMPORTED_MODULE_4__.LC,parameters:{},tags:["autodocs"],args:{},argTypes:{}},service=params=>fetch(`https://api.github.com/search/repositories?${qs__WEBPACK_IMPORTED_MODULE_2___default().stringify(params)}`).then(res=>res.json()),Basic={render:()=>{const RequestREF=react__WEBPACK_IMPORTED_MODULE_3__.useRef(null),InputREF=react__WEBPACK_IMPORTED_MODULE_3__.useRef("");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_11__.A.Title,{heading:5,style:{marginTop:0},children:"表格数据加载"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_9__.A,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_8__.A,{defaultValue:"klipper",onChange:value=>InputREF.current=value,placeholder:"输入搜索关键词"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_7__.A,{type:"primary",onClick:()=>RequestREF.current?.setParams({q:InputREF.current}),children:"搜索"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{paddingTop:"16px",width:"100%"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_src_components_RequestProvider__WEBPACK_IMPORTED_MODULE_4__.LC,{ref:RequestREF,params:{q:"klipper",page:1,per_page:20},service,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src_components_RequestProvider__WEBPACK_IMPORTED_MODULE_4__.k_,{schema:{data:{dataIndex:["items"],fallback:[]},pagination:{dataIndex:["total_count"],format:total=>({total,current:RequestREF.current?.params.page,onChange:page=>{RequestREF.current?.setParams({page})},pageSize:20})}},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_10__.A,{border:!1,rowKey:"id",columns:[{dataIndex:"full_name",title:"full_name"},{dataIndex:"language",title:"language"},{dataIndex:"size",title:"size"},{dataIndex:"stargazers_count",title:"stargazers_count"},{dataIndex:"forks",title:"forks"},{dataIndex:"open_issues",title:"open_issues"},{dataIndex:"watchers",title:"watchers"}]},"void")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src_components_RequestProvider__WEBPACK_IMPORTED_MODULE_4__.k_,{schema:{message:{dataIndex:["message"]}},children:({message})=>message?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_6__.A,{style:{marginTop:"16px"},content:message,type:"error"}):""})]})})]})}},FormValuesInject={render:()=>{const RequestREF=react__WEBPACK_IMPORTED_MODULE_3__.useRef(null),InputREF=react__WEBPACK_IMPORTED_MODULE_3__.useRef("");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_11__.A.Title,{heading:5,style:{marginTop:0},children:"表单数据加载"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_9__.A,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_8__.A,{defaultValue:"KlipperScreen",onChange:value=>InputREF.current=value,placeholder:"输入搜索关键词"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_7__.A,{type:"primary",onClick:()=>RequestREF.current?.setParams({q:InputREF.current}),children:"载入"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{paddingTop:"16px",width:"100%"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_src_components_RequestProvider__WEBPACK_IMPORTED_MODULE_4__.LC,{ref:RequestREF,params:{q:"KlipperScreen",page:1,per_page:20},service,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src_components_RequestProvider__WEBPACK_IMPORTED_MODULE_4__.k_,{schema:{message:{dataIndex:["message"]}},children:({message})=>message?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_arco_design_web_react__WEBPACK_IMPORTED_MODULE_6__.A,{style:{marginBottom:"16px"},content:message,type:"error"}):""}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src_components_RequestProvider__WEBPACK_IMPORTED_MODULE_4__.k_,{schema:{initialValues:{dataIndex:["items","0"],fallback:[]}},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src_components_FormRender__WEBPACK_IMPORTED_MODULE_5__.b,{layout:"vertical",schemas:{type:"object",properties:{full_name:{label:"项目名称",compName:"Input"},html_url:{label:"项目地址",span:20,compName:"Input"},language:{label:"语言",span:4,compName:"Input",compProps:{options:[]}},description:{label:"项目描述",compName:"InputTextArea"},topics:{compName:"List",span:18,label:"主题",compProps:{schemas:{type:"array",properties:{key:{compName:"Input",span:24,compProps:{}}}}}}}},comments:{},onSubmit:values=>{console.log({values})}})})]})})]})}},__namedExportsOrder=["Basic","FormValuesInject"];Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const RequestREF = React.useRef<RequestProviderRefType<{\n      q: string;\n      page: 1;\n      per_page: 20;\n    }>>(null);\n    const InputREF = React.useRef<string>("");\n    return <div>\n        <Typography.Title heading={5} style={{\n        marginTop: 0\n      }}>\n          表格数据加载\n        </Typography.Title>\n        <Space>\n          <Input defaultValue="klipper" onChange={value => InputREF.current = value} placeholder="输入搜索关键词" />\n          <Button type="primary" onClick={() => RequestREF.current?.setParams({\n          q: InputREF.current\n        })}>\n            搜索\n          </Button>\n        </Space>\n        <div style={{\n        paddingTop: "16px",\n        width: "100%"\n      }}>\n          <RequestProvider ref={RequestREF} params={{\n          q: "klipper",\n          page: 1,\n          per_page: 20\n        }} service={service}>\n            <InjectProps schema={{\n            data: {\n              dataIndex: ["items"],\n              fallback: []\n            },\n            pagination: {\n              dataIndex: ["total_count"],\n              format: total => {\n                return {\n                  total: total,\n                  current: RequestREF.current?.params.page,\n                  onChange: page => {\n                    RequestREF.current?.setParams({\n                      page\n                    });\n                  },\n                  pageSize: 20\n                };\n              }\n            }\n          }}>\n              <Table border={false} key="void" rowKey="id" columns={[{\n              dataIndex: "full_name",\n              title: "full_name"\n            }, {\n              dataIndex: "language",\n              title: "language"\n            }, {\n              dataIndex: "size",\n              title: "size"\n            }, {\n              dataIndex: "stargazers_count",\n              title: "stargazers_count"\n            }, {\n              dataIndex: "forks",\n              title: "forks"\n            }, {\n              dataIndex: "open_issues",\n              title: "open_issues"\n            }, {\n              dataIndex: "watchers",\n              title: "watchers"\n            }]} />\n            </InjectProps>\n            <InjectProps schema={{\n            message: {\n              dataIndex: ["message"]\n            }\n          }}>\n              {({\n              message\n            }: any) => message ? <Alert style={{\n              marginTop: "16px"\n            }} content={message} type="error" /> : ""}\n            </InjectProps>\n          </RequestProvider>\n        </div>\n      </div>;\n  }\n}',...Basic.parameters?.docs?.source}}},FormValuesInject.parameters={...FormValuesInject.parameters,docs:{...FormValuesInject.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const RequestREF = React.useRef<RequestProviderRefType<{\n      q: string;\n      page: 1;\n      per_page: 20;\n    }>>(null);\n    const InputREF = React.useRef<string>("");\n    return <div>\n        <Typography.Title heading={5} style={{\n        marginTop: 0\n      }}>\n          表单数据加载\n        </Typography.Title>\n        <Space>\n          <Input defaultValue="KlipperScreen" onChange={value => InputREF.current = value} placeholder="输入搜索关键词" />\n          <Button type="primary" onClick={() => RequestREF.current?.setParams({\n          q: InputREF.current\n        })}>\n            载入\n          </Button>\n        </Space>\n        <div style={{\n        paddingTop: "16px",\n        width: "100%"\n      }}>\n          <RequestProvider ref={RequestREF} params={{\n          q: "KlipperScreen",\n          page: 1,\n          per_page: 20\n        }} service={service}>\n            <InjectProps schema={{\n            message: {\n              dataIndex: ["message"]\n            }\n          }}>\n              {({\n              message\n            }: any) => message ? <Alert style={{\n              marginBottom: "16px"\n            }} content={message} type="error" /> : ""}\n            </InjectProps>\n            <InjectProps schema={{\n            initialValues: {\n              dataIndex: ["items", "0"],\n              fallback: []\n            }\n          }}>\n              <FormRender layout="vertical" schemas={{\n              type: "object",\n              properties: {\n                full_name: {\n                  label: "项目名称",\n                  compName: "Input"\n                },\n                html_url: {\n                  label: "项目地址",\n                  span: 20,\n                  compName: "Input"\n                },\n                language: {\n                  label: "语言",\n                  span: 4,\n                  compName: "Input",\n                  compProps: {\n                    options: []\n                  }\n                },\n                description: {\n                  label: "项目描述",\n                  compName: "InputTextArea"\n                },\n                topics: {\n                  compName: "List",\n                  span: 18,\n                  label: "主题",\n                  compProps: {\n                    schemas: {\n                      type: "array",\n                      properties: {\n                        key: {\n                          compName: "Input",\n                          span: 24,\n                          compProps: {}\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }} comments={{}} onSubmit={values => {\n              console.log({\n                values\n              });\n            }} />\n            </InjectProps>\n          </RequestProvider>\n        </div>\n      </div>;\n  }\n}',...FormValuesInject.parameters?.docs?.source}}}},"?6b64":()=>{}}]);